<jqa:jqassistant-rules xmlns:jqa="http://www.buschmais.com/jqassistant/core/analysis/rules/schema/v1.0">

    <concept id="dependency:Type">
        <description>Creates a DEPENDS_ON relationship between types if there are method calls between them. The number
            of method calls results in the relationship's weight.
        </description>
        <cypher><![CDATA[
               MATCH
                 (t1:Type)-[:DECLARES]->(m1:Method)-[c:CALLS]->(m2:Method)<-[:DECLARES]-(t2:Type)
               WHERE
                 t1<>t2
               WITH
                 t1, t2, COUNT(c) as weight
               CREATE UNIQUE
                 (t1)-[d:DEPENDS_ON]->(t2)
               SET
                 d.weight = weight
               RETURN
                 t1, t2, weight
        ]]></cypher>
    </concept>
</jqa:jqassistant-rules>
